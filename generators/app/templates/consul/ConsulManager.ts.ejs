import Consul from "consul";

class ConsulManager {

    private consulClient: Consul;

    constructor(consulHost: string, consulPort: string, consulToken: string) {
        this.consulClient = new Consul({
            host: consulHost,
            port: parseInt(consulPort),
            defaults: {
              token: consulToken,  
            },
        })
    }

    public async getValue(folder: string, key: string): Promise<string | null> {
        const value = await this.consulClient.kv.get(`${folder}/${key}`)  
        if(value === undefined || value === null) {
            return null;
        }
        return value.Value || null;
    }

}

export { ConsulManager };